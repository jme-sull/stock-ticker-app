import * as Moment from "moment";
import { extendMoment } from "moment-range";
import { Line } from "react-chartjs-2";

const Graph = ({ label }) => {
  const moment = extendMoment(Moment);
  const now = Date.now();
  const oneYearAgo = new Date().setFullYear(new Date().getFullYear() - 1);
  const nowFormatted = moment(now).format("MMM Do YYYY");
  const oneYearAgoFormatted = moment(oneYearAgo).format("MMM Do YYYY");
  const range = moment.range(oneYearAgo, now);
  const days = Array.from(range.by("day"));
  const labelsArray = [];
  days.map((day) => {
    labelsArray.push(moment(day._d).format("MMM Do YYYY"));
  });

  console.log(now);
  console.log(oneYearAgo);
  console.log(range);
  console.log(days);
  console.log(labelsArray);

  const data = {
    labels: [],
    datasets: [
      {
        label: `${label}`,
        fill: false,
        lineTension: 0.1,
        backgroundColor: "rgba(75,192,192,0.4)",
        borderColor: "#007cad",
        borderCapStyle: "butt",
        borderDash: [],
        borderDashOffset: 0.0,
        borderJoinStyle: "miter",
        pointBorderColor: "#007cad",
        pointBackgroundColor: "#fff",
        pointBorderWidth: 1,
        pointHoverRadius: 5,
        pointHoverBackgroundColor: "#f5e642",
        pointHoverBorderColor: "rgba(220,220,220,1)",
        pointHoverBorderWidth: 2,
        pointRadius: 1,
        pointHitRadius: 10,
        data: [
          120.44,
          120.435,
          120.46,
          120.4,
          120.44,
          120.43,
          120.49,
          120.525,
          120.58,
          120.61,
          120.58,
          120.515,
          120.455,
          120.47,
          120.41,
          120.44,
          120.51,
          120.43,
          120.44,
          120.41,
          120.44,
          120.38,
          120.38,
          120.51,
          120.51,
          120.44,
          120.46,
          120.45,
          120.48,
          120.525,
          120.46,
          120.45,
          120.4,
          120.52,
          120.54,
          120.64,
          120.64,
          120.725,
          120.78,
          120.715,
          120.705,
          120.74,
          120.74,
          120.745,
          120.8,
          120.855,
          120.85,
          120.87,
          120.83,
          120.93,
          120.92,
          120.88,
          120.85,
          120.825,
          120.84,
          120.84,
          120.84,
          120.83,
          120.8,
          120.76,
          120.64,
          120.68,
          120.69,
          120.71,
          120.53,
          120.485,
          120.485,
          120.52,
          120.54,
          120.65,
          120.63,
          120.63,
          120.66,
          120.65,
          120.59,
          120.55,
          120.58,
          120.61,
          120.58,
          120.6,
          120.65,
          120.66,
          120.635,
          120.64,
          120.7,
          120.73,
          120.75,
          120.8,
          120.82,
          120.73,
          120.8,
          120.75,
          120.59,
          120.64,
          120.67,
          120.59,
          120.55,
          120.48,
          120.37,
          120.34,
          120.395,
          120.38,
          120.46,
          120.43,
          120.43,
          120.2,
          120.2,
          120.29,
          120.27,
          120.35,
          120.39,
          120.535,
          120.5,
          120.5,
          120.49,
          120.49,
          120.48,
          120.47,
          120.435,
          120.42,
          120.44,
          120.48,
          120.5,
          120.55,
          120.47,
          120.5,
          120.49,
          120.42,
          120.38,
          120.36,
          120.28,
          120.33,
          120.19,
          120.18,
          120.26,
          120.22,
          120.33,
          120.36,
          120.37,
          120.39,
          120.35,
          120.4,
          120.35,
          120.34,
          120.11,
          120.06,
          120.08,
          120.14,
          120.14,
          120.08,
          120.08,
          120.11,
          120.02,
          120.07,
          120.05,
          120.06,
          120.15,
          120.15,
          120.14,
          120.13,
          120.24,
          120.24,
          120.13,
          120.22,
          120.21,
          120.15,
          120.095,
          120.1,
          120.14,
          120.105,
          120.035,
          120.12,
          120.145,
          120.125,
          120.1,
          120.11,
          120.14,
          120.18,
          120.22,
          120.18,
          120.18,
          120.19,
          120.13,
          120.175,
          120.16,
          120.2,
          120.23,
          120.245,
          120.36,
          120.32,
          120.34,
          120.3,
          120.315,
          120.315,
          120.285,
          120.23,
          120.13,
          120.12,
          120.08,
          119.985,
          120.03,
          120.07,
          120.12,
          120.05,
          119.965,
          119.97,
          119.99,
          119.93,
          119.94,
          119.98,
          119.99,
          119.99,
          119.91,
          119.92,
          119.94,
          119.94,
          119.87,
          119.83,
          119.865,
          119.895,
          119.87,
          119.9,
          119.88,
          119.905,
          119.92,
          119.84,
          119.73,
          119.71,
          119.64,
          119.74,
          119.74,
          119.725,
          119.75,
          119.79,
          119.85,
          119.86,
          119.83,
          119.82,
          119.7,
          119.74,
          119.76,
          119.78,
          119.86,
          119.87,
          120.01,
          120.065,
          120.03,
          119.99,
          119.99,
          120.02,
          119.99,
          119.935,
          119.83,
          119.93,
          119.92,
          120.035,
          119.98,
          120,
          120,
          120,
          120.04,
          119.985,
          119.95,
          119.96,
          119.985,
          119.95,
          119.99,
          119.985,
          120.02,
          120.03,
          120.01,
          119.99,
          120.03,
          119.95,
          119.85,
          119.8,
          119.825,
          119.93,
          119.92,
          119.91,
          119.86,
          119.89,
          120.1,
          120.35,
          120.23,
          120.28,
          120.3,
          120.28,
          120.3,
          120.25,
          120.21,
          120.2,
          120.23,
          120.27,
          120.29,
          120.28,
          120.3,
          120.33,
          120.35,
          120.32,
          120.3,
          120.28,
          120.28,
          120.3,
          120.3,
          120.23,
          120.3,
          120.31,
          120.31,
          120.33,
          120.35,
          120.31,
          120.25,
          120.2,
          120.18,
          120.2,
          120.22,
          120.25,
          120.23,
          120.26,
          120.3,
          120.3,
          120.32,
          120.35,
          120.31,
          120.32,
          120.31,
          120.32,
          120.35,
          120.36,
          120.37,
          120.35,
          120.4,
          120.4,
          120.42,
          120.39,
          120.4,
          120.36,
          120.4,
          120.41,
          120.4,
          120.37,
          120.36,
          120.35,
          120.35,
          120.33,
          120.34,
          120.33,
          120.36,
          120.34,
          120.34,
          120.34,
          120.28,
          120.24,
          120.41,
          120.4,
          120.27,
          120.3,
          120.3,
          120.26,
          120.23,
          120.18,
          120.18,
          120.17,
          120.12,
          120.15,
          120.15,
          120.12,
          120.09,
          120.12,
          120.12,
          120.08,
          120.08,
          120.1,
          120.1,
          120.05,
          120.02,
          120.02,
          120.01,
          120.01,
          119.95,
          119.95,
          120.05,
          120.05,
          120.13,
          120.06,
          120.07,
          120.01,
          120.02,
          120.01,
          120.06,
          120.03,
          120.02,
          120.06,
          120.06,
          120.3,
          120.27,
          120.2,
          120.07,
          120.08,
          120.07,
          120.05,
          120.04,
          120.02,
          120.05,
          120.03,
          120.03,
          120.05,
          120.03,
          120.03,
          120,
          120.03,
          120.03,
          120.05,
          120.03,
          120.02,
          120.03,
          120.01,
          120.01,
          120.05,
          120.03,
          120.03,
          120.01,
          120.01,
          120.03,
          119.98,
          120.03,
          120.05,
          120.05,
          120.1,
          120.09,
          120.06,
          120.07,
          120.05,
          120.06,
          120,
          120,
          120.05,
          120.05,
          120,
          119.99,
          120,
          120.02,
          120.02,
          120,
          120,
          119.98,
          119.94,
          119.99,
          119.93,
          119.93,
          119.9,
          119.91,
          119.91,
          119.95,
          119.97,
          119.96,
          119.96,
          119.97,
          120,
          120,
          120,
          119.99,
          119.96,
          119.96,
          119.93,
          119.97,
          119.92,
          119.91,
          119.9,
          119.92,
          119.92,
          119.88,
          119.88,
          119.85,
          119.8,
          119.78,
          119.77,
          119.79,
          119.83,
          119.8,
          119.83,
          119.84,
          119.83,
          119.8,
          119.8,
          119.83,
          119.83,
          119.84,
          119.86,
          119.84,
          119.84,
          119.83,
          119.9,
          119.91,
          119.92,
          119.92,
          119.92,
          119.94,
          119.93,
          119.94,
          119.94,
          119.9,
          119.9,
          119.72,
          119.9,
          119.86,
          119.86,
          119.9,
          119.9,
          119.85,
          119.8,
          119.85,
          119.89,
          119.85,
          119.85,
          119.85,
          119.85,
          119.85,
          119.75,
          119.75,
          119.75,
          119.8,
          119.84,
          119.85,
          119.8,
          119.79,
          119.8,
          119.72,
          119.79,
          119.72,
          119.63,
          119.61,
          119.66,
          119.66,
          119.69,
          119.69,
          119.72,
          119.6,
          119.69,
          119.66,
          119.66,
          119.7,
          119.7,
          119.74,
          119.7,
          119.7,
          119.7,
          119.6,
          119.52,
          119.47,
          119.6,
          119.6,
          119.51,
          119.51,
          119.6,
          119.6,
          119.5,
          119.4,
          119.41,
          119.51,
          119.59,
          119.59,
          119.56,
          119.59,
          119.6,
          119.61,
          119.6,
          119.69,
          119.59,
          119.59,
          119.56,
          119.59,
          119.65,
          119.84,
          119.77,
          119.8,
          119.8,
          119.82,
          119.81,
          119.77,
          119.77,
          119.76,
          119.75,
          119.65,
          119.64,
          119.63,
          119.7,
          119.73,
          119.81,
          119.78,
          119.61,
          119.65,
          119.68,
          119.66,
          119.63,
          119.63,
          119.65,
          119.6,
          119.63,
          119.5,
          119.49,
          119.5,
          119.55,
          119.5,
          119.54,
          119.5,
          119.5,
          119.6,
          119.58,
          119.54,
          119.6,
          119.61,
          119.65,
          119.66,
          119.67,
          119.7,
          119.71,
          119.71,
          119.67,
          119.69,
          119.7,
          119.72,
          119.65,
          119.69,
          119.73,
          119.74,
          119.78,
          119.74,
          119.78,
          119.76,
          119.78,
          119.75,
          119.78,
          119.8,
          119.77,
          119.75,
          119.71,
          119.66,
          119.54,
          119.62,
          119.65,
          119.61,
          119.65,
          119.61,
          119.64,
          119.7,
          119.7,
          119.7,
          119.76,
          119.74,
          119.71,
          119.74,
          119.71,
          119.71,
          119.67,
          119.68,
          119.64,
          119.7,
          119.66,
          119.7,
          119.72,
          119.51,
          119.56,
          119.57,
          119.689,
          119.65,
          119.65,
          119.62,
          119.59,
          119.69,
          119.67,
          119.62,
          119.64,
          119.65,
          119.66,
          119.7,
          119.67,
          119.65,
          119.69,
          119.7,
          119.71,
          119.66,
          119.69,
          119.67,
          119.69,
          119.71,
          119.7,
          119.7,
          119.73,
          119.72,
          119.62,
          119.66,
          119.68,
          119.69,
          119.65,
          119.65,
          119.67,
          119.62,
          119.62,
          119.58,
          119.66,
          119.59,
          119.6,
          119.69,
          119.71,
          119.76,
          119.75,
          119.75,
          119.79,
          119.82,
          119.8,
          119.75,
          119.79,
          119.78,
          119.76,
          119.756,
          119.55,
          119.5,
          119.841,
          119.671,
          120.06,
          119.99,
          120.19,
          120.17,
          120.2,
          120.09,
          119.94,
          119.98,
          119.975,
          120.12,
          119.765,
          119.6,
          119.505,
          119.29,
          119.25,
          119.22,
          119.22,
          119.37,
          119.23,
          119.13,
          119.18,
          119.28,
          119.35,
          119.39,
          119.42,
          119.37,
          119.25,
          119.13,
          119.32,
          119.34,
          119.37,
          119.38,
          119.18,
          119.31,
          119.37,
          119.42,
          119.491,
          119.54,
          119.5,
          119.41,
          119.46,
          119.62,
          119.61,
          119.58,
          119.66,
          119.7,
          119.66,
          119.63,
          119.605,
          119.63,
          119.7,
          119.67,
          119.8,
          119.86,
          119.81,
          119.82,
          119.84,
          119.85,
          119.92,
          119.965,
          119.93,
          119.85,
          119.81,
          119.845,
          119.86,
          119.885,
          119.915,
          119.9,
          119.93,
          120.05,
          120.125,
          120.25,
          120.175,
          120.17,
          120.15,
          120.125,
          120.19,
          120.13,
          120.225,
          120.25,
          120.29,
          120.4,
          120.44,
          120.45,
          120.42,
          120.47,
          120.42,
          120.37,
          120.35,
          120.265,
          120.25,
          120.195,
          120.155,
          120.285,
          120.25,
          120.195,
          120.24,
          120.3,
          120.28,
          120.21,
          120.15,
          120.11,
          120.15,
          120.08,
        ],
      },
    ],
  };

  const newData = { ...data, labels: labelsArray };

  return (
    <div>
      <h2>
        Daily Closing Price: {oneYearAgoFormatted} to {nowFormatted}
      </h2>
      <Line data={newData} width={300} height={200} />
    </div>
  );
};

export default Graph;
